!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pi-home-gpio",[],e):"object"==typeof exports?exports["pi-home-gpio"]=e():t["pi-home-gpio"]=e()}(global,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";const o=n(1),r=n(3),i=n(4).Epoll,c=Buffer.from("1"),u=Buffer.from("0");class s{constructor(t,e,n,c){"object"!=typeof n||c||(c=n,n=void 0),c=c||{},this._gpio=t,this._gpioPath="/sys/class/gpio/gpio"+this._gpio+"/",this._debounceTimeout=c.debounceTimeout||0,this._readBuffer=Buffer.alloc(16),this._readSyncBuffer=Buffer.alloc(16),this._listeners=[];const u=(t=>!!o.existsSync(t._gpioPath)||(o.writeFileSync("/sys/class/gpio/export",""+t._gpio),!1))(this);((t,e,n,r)=>{let i=[t._gpioPath+"value"];!1===r&&(i.push(t._gpioPath+"direction"),i.push(t._gpioPath+"active_low"),n&&"in"===e&&i.push(t._gpioPath+"edge")),i.forEach(t=>{let e=0;for(;;)try{e+=1;const n=o.openSync(t,"r+");o.closeSync(n);break}catch(t){if(1e4===e)throw t}})})(this,e,n,u),((t,e,n,o,r)=>{const i=t=>{if(!1===r)throw t};try{"boolean"==typeof o.activeLow&&t.setActiveLow(o.activeLow)}catch(t){i(t)}try{const n="boolean"!=typeof o.reconfigureDirection||o.reconfigureDirection,r="high"===e||"low"===e?"out":e;(n||t.direction()!==r)&&t.setDirection(e)}catch(t){i(t)}try{n&&"in"===e&&t.setEdge(n)}catch(t){i(t)}})(this,e,n,c,u),this._valueFd=o.openSync(this._gpioPath+"value","r+"),(t=>{const e=(e,n,o)=>{const r=t.readSync();(0===r&&t._fallingEnabled||1===r&&t._risingEnabled)&&t._listeners.slice(0).forEach(t=>{t(e,r)})};if(t.readSync(),t._debounceTimeout>0){const n=r(e,t._debounceTimeout);t._poller=new i((e,o,r)=>{t.readSync(),n(e,o,r)})}else t._poller=new i(e)})(this)}read(t){const e=t=>{o.read(this._valueFd,this._readBuffer,0,1,0,(e,n,o)=>{if("function"==typeof t){if(e)return t(e);t(null,f(o))}})};if(!t)return new Promise((t,n)=>{e((e,o)=>{e?n(e):t(o)})});e(t)}readSync(){return o.readSync(this._valueFd,this._readSyncBuffer,0,1,0),f(this._readSyncBuffer)}write(t,e){const n=(t,e)=>{const n=a(t);o.write(this._valueFd,n,0,n.length,0,e)};if(!e)return new Promise((e,o)=>{n(t,t=>{t?o(t):e()})});n(t,e)}writeSync(t){const e=a(t);o.writeSync(this._valueFd,e,0,e.length,0)}watch(t){this._listeners.push(t),1===this._listeners.length&&this._poller.add(this._valueFd,i.EPOLLPRI)}unwatch(t){this._listeners.length>0&&(this._listeners="function"!=typeof t?[]:this._listeners.filter(e=>t!==e),0===this._listeners.length&&this._poller.remove(this._valueFd))}unwatchAll(){this.unwatch()}direction(){return o.readFileSync(this._gpioPath+"direction").toString().trim()}setDirection(t){o.writeFileSync(this._gpioPath+"direction",t)}edge(){return o.readFileSync(this._gpioPath+"edge").toString().trim()}setEdge(t){o.writeFileSync(this._gpioPath+"edge",t),this._risingEnabled="both"===t||"rising"===t,this._fallingEnabled="both"===t||"falling"===t}activeLow(){return p(o.readFileSync(this._gpioPath+"active_low"))}setActiveLow(t){o.writeFileSync(this._gpioPath+"active_low",l(!!t))}unexport(){this.unwatchAll(),o.closeSync(this._valueFd);try{o.writeFileSync("/sys/class/gpio/unexport",""+this._gpio)}catch(t){}}static get accessible(){let t;try{t=o.openSync("/sys/class/gpio/export","r+")}catch(t){return!1}finally{t&&o.closeSync(t)}return!0}}const a=t=>l(1===t),f=t=>p(t)?1:0,l=t=>t?c:u,p=t=>t[0]===c[0];s.HIGH=1,s.LOW=0,t.exports.Gpio=s},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("path")},function(t,e){var n=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,i=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,a=u||s||Function("return this")(),f=Object.prototype.toString,l=Math.max,p=Math.min,d=function(){return a.Date.now()};function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==f.call(t)}(t))return NaN;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var u=r.test(t);return u||i.test(t)?c(t.slice(2),u?2:8):o.test(t)?NaN:+t}t.exports=function(t,e,n){var o,r,i,c,u,s,a=0,f=!1,b=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function _(e){var n=o,i=r;return o=r=void 0,a=e,c=t.apply(i,n)}function v(t){return a=t,u=setTimeout(w,e),f?_(t):c}function m(t){var n=t-s;return void 0===s||n>=e||n<0||b&&t-a>=i}function w(){var t=d();if(m(t))return S(t);u=setTimeout(w,function(t){var n=e-(t-s);return b?p(n,i-(t-a)):n}(t))}function S(t){return u=void 0,g&&o?_(t):(o=r=void 0,c)}function O(){var t=d(),n=m(t);if(o=arguments,r=this,s=t,n){if(void 0===u)return v(s);if(b)return u=setTimeout(w,e),_(s)}return void 0===u&&(u=setTimeout(w,e)),c}return e=h(e)||0,y(n)&&(f=!!n.leading,i=(b="maxWait"in n)?l(h(n.maxWait)||0,e):i,g="trailing"in n?!!n.trailing:g),O.cancel=function(){void 0!==u&&clearTimeout(u),a=0,o=s=r=u=void 0},O.flush=function(){return void 0===u?c:S(d())},O}},function(t,e,n){"use strict";t.exports=(t=>{const e=n(5).type();return"Linux"===e?n(6)("epoll.node"):(console.warn(`Warning: epoll is built for Linux and not intended for usage on ${e}.`),{Epoll:{}})})()},function(t,e){t.exports=require("os")},function(t,e,n){(function(o){var r=n(1),i=n(2),c=n(7),u=i.join,s=i.dirname,a=r.accessSync&&function(t){try{r.accessSync(t)}catch(t){return!1}return!0}||r.existsSync||i.existsSync,f={arrow:process.env.NODE_BINDINGS_ARROW||" â†’ ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};t.exports=e=function(t){"string"==typeof t?t={bindings:t}:t||(t={}),Object.keys(f).map((function(e){e in t||(t[e]=f[e])})),t.module_root||(t.module_root=e.getRoot(e.getFileName())),".node"!=i.extname(t.bindings)&&(t.bindings+=".node");for(var n,o,r,c=require,s=[],a=0,l=t.try.length;a<l;a++){n=u.apply(null,t.try[a].map((function(e){return t[e]||e}))),s.push(n);try{return o=t.path?c.resolve(n):c(n),t.path||(o.path=n),o}catch(t){if("MODULE_NOT_FOUND"!==t.code&&"QUALIFIED_PATH_RESOLUTION_FAILED"!==t.code&&!/not find/i.test(t.message))throw t}}throw(r=new Error("Could not locate the bindings file. Tried:\n"+s.map((function(e){return t.arrow+e})).join("\n"))).tries=s,r},e.getFileName=function(t){var e,n=Error.prepareStackTrace,r=Error.stackTraceLimit,i={};Error.stackTraceLimit=10,Error.prepareStackTrace=function(n,r){for(var i=0,c=r.length;i<c;i++)if((e=r[i].getFileName())!==o){if(!t)return;if(e!==t)return}},Error.captureStackTrace(i),Error.prepareStackTrace=n,Error.stackTraceLimit=r;return 0===e.indexOf("file://")&&(e=c(e)),e},e.getRoot=function(t){for(var e,n=s(t);;){if("."===n&&(n=process.cwd()),a(u(n,"package.json"))||a(u(n,"node_modules")))return n;if(e===n)throw new Error('Could not find module root given file: "'+t+'". Do you have a `package.json` file? ');e=n,n=u(n,"..")}}}).call(this,"/index.js")},function(t,e,n){var o=n(2).sep||"/";t.exports=function(t){if("string"!=typeof t||t.length<=7||"file://"!=t.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");var e=decodeURI(t.substring(7)),n=e.indexOf("/"),r=e.substring(0,n),i=e.substring(n+1);"localhost"==r&&(r="");r&&(r=o+o+r);i=i.replace(/^(.+)\|/,"$1:"),"\\"==o&&(i=i.replace(/\//g,"\\"));/^.+\:/.test(i)||(i=o+i);return r+i}},function(t,e,n){"use strict";n.r(e),n.d(e,"Led",(function(){return h})),n.d(e,"Button",(function(){return w}));var o=n(0);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function t(){var e=this;r(this,t),i(this,"value",0),i(this,"writeSync",(function(t){console.log("writeSync(".concat(t,")")),e.value=t})),i(this,"readSync",(function(){return console.log("readSync => ".concat(e.value)),e.value}))},u=function t(e,n){r(this,t),i(this,"pin",void 0),o.Gpio.accessible?this.pin=new o.Gpio(e,n):this.pin=new c};function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return l(this,n)}}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=f(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),y(p(r=e.call(this,t,"out")),"on",(function(){return r.pin.writeSync(o.Gpio.HIGH)})),y(p(r),"off",(function(){return r.pin.writeSync(o.Gpio.LOW)})),y(p(r),"toggle",(function(){return r.pin.writeSync(1^r.pin.readSync())})),y(p(r),"value",(function(t){if(void 0===t)return r.pin.readSync();r.pin.writeSync(t)})),r}return n}(u);function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=m(t);if(e){var r=m(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==b(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(n,t);var e=_(n);function n(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),e.call(this,t,"in")}return n}(u)}])}));